<?php 
include "../connect/db.php";
function xss($data){
    htmlspecialchars(htmlentities($data));
}
if (!isset($_SESSION)){

    session_start();
}

?>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="Doxbin is a document sharing and publishing website for text-based information such as dox, code-snippets and other stuff.">
	    <title>Doxbin</title>
    <link rel="stylesheet" href="https://doxbin.com/legacy/index.css">
    <link rel="stylesheet" href="https://doxbin.com/legacy/css/main.css?r=44">
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link href="https://doxbin.com/legacy/dropdown.css" rel="stylesheet">
<link href="https://doxbin.com/files/doxbin.css" rel="stylesheet">
<script src="https://doxbin.com/legacy/jquery.min.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://doxbin.com/legacy/logout.js"></script>    	
    <script>

        var order = 'none';
        var type = 'none';
        
    </script>
    <style>
        .table-hover>tbody>tr.rich-post{
            background-color: #3e3704;
        }
        .table-hover>tbody>tr.rich-post:hover{
            background-color: #312c04;
        }
        .table-hover>tbody>tr.clique-post{
            background-color: #09092f;
        }
        .table-hover>tbody>tr.clique-post:hover{
            background-color: #080827;
        }
        .table-hover>tbody>tr.council-post{
            background-color: rgb(17, 49, 70);
        }
        .table-hover>tbody>tr.council-post:hover{
            background-color: rgb(11, 36, 51);
        }
    
    </style>
</head>


<?php 

if(isset($_POST['search-query'])){
    if(empty($_POST['search-query'])){

        $_SESSION['error'] = '<p style="color: red; padding: 0px 0px 10px 0px; text-align: center; margin: 0;">The requested search appears to be empty!</p>';
        header("location: ../");
    }
    if (strlen($_POST['search-query']) > 20){
        $_SESSION['error'] = '<p style="color: red; padding: 0px 0px 10px 0px; text-align: center; margin: 0;">The requested search criteria is too long.!</p>';
        die(header("location: ../"));
    }
}else {
    die(header("location: ../"));
}


?>
<body>

    <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://github.com/DarkRabbit-0/Doxbin">Doxbin 2.0</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li class="active"><a href="../">Home</a></li>
                <li><a href="..//upload">Add Paste</a></li>
                <li ><a href="..//users">Users</a></li>
            
                            </ul>
            <div class="sidebar-right">
                                    <ul class="nav navbar-nav">
                        <li ><a href="/login">Login</a></li>
                        <li ><a href="/register">Register</a></li>
                    </ul>
                            </div>
        </div>
    </div>
</nav>
    <div class="col-md-12">
        <div class="col-md-12" style="margin-top: 60px;float:none;">
            <div align="center">
                <pre style="font: 2px/1px monospace; background-color: #060606; overflow-x: hidden; overflow-y: hidden; border: none; color: white;">
                                             .                                                                                          .                                            
                                            .#                                                                                          #.                                           
                                           #@@                                                                                          @@#                                          
                                          @@@@                                                                                          @@@@                                         
                                         @@@@                                                                                            @@@@                                        
                                       .@@@@@                                                                                            @@@@@.                                      
                                      ,@@@@@                                                                                              @@@@@,                                     
                                     .@@@@@'                                                                                              '@@@@@.                                    
                                   .@@@ @@@                                                                                                @@@ @@@,                                  
                                  .@@@ ,@@@                                                                                                @@@, @@@,                                 
                                 .@@@  @@@'                                                                                                '@@@  @@@.                                
                                ,@@@   @@@                                                                                                  @@@   @@@,                               
                               ,@@@'  ,@@@                                                                                                  @@@,  @@@@,                              
                              ,@@@@   @@@'                                                                                                  @@@@   @@@@,                             
                             ,@@@@    @@@                                                                                                   @@@@    @@@@.                            
                            ,@@@@    :@@@                                                                                                   @@@;     @@@@.                           
                           ,@@@@     @@@@                                                                                                   @@@@     +@@@@                           
                           @@@@`    ,@@@:                                                                                                   :@@@,     @@@@'                          
                          ,@@@@     @@@@                                                                                                     @@@@     .@@@@                          
                         .@@@@      @@@@                                                                                                     @@@@      @@@@#                         
                         @@@@+      @@@@                                                                                                     @@@@`      @@@@`                        
                        :@@@@       @@@@                                                                                                     @@@@;      @@@@@                        
                        @@@@'      `@@@@                                                                                                     @@@@#       @@@@`                       
                       :@@@@       .@@@@                                                                                                     +@@@@       #@@@@                       
                       @@@@'       ;@@@@                                                                                                     ;@@@@        @@@@`                      
                      :@@@@        @@@@@                                                                                                     ,@@@@        @@@@@                      
                      @@@@+        @@@@@                                                                                                      @@@@         @@@@                      
                     .@@@@         @@@@#                                                                                                      @@@@`        @@@@#                     
                     @@@@#         @@@@'                                                                                                      @@@@'        `@@@@                     
                     @@@@         .@@@@;                                                                                                      @@@@@         @@@@;                    
                    +@@@@         '@@@@,                                                                                                      @@@@@         ;@@@@                    
                    @@@@:         #@@@@.                                                                                                      @@@@@          @@@@`                   
                   `@@@@          @@@@@.                                                                                                      @@@@@          @@@@#                   
                   #@@@@          @@@@@.                                                                                                      @@@@@          .@@@@                   
                   @@@@.          @@@@@.                                                                                                      @@@@@           @@@@.                  
                  .@@@@           @@@@@,                                                                                                      @@@@@           @@@@@                  
                  @@@@@           @@@@@;                                                                                                      @@@@@`          .@@@@                  
                  @@@@.           @@@@@'                                                                                                      @@@@@`           @@@@`                 
                  @@@@            @@@@@@                                                                                                      @@@@@            @@@@+                 
                 '@@@@            @@@@@@                                                                                                     `@@@@@            '@@@@                 
                 @@@@#            @@@@@@                                                                                                     :@@@@@             @@@@                 
                 @@@@.            @@@@@@                                                                                                     '@@@@@             @@@@`                
                 @@@@             @@@@@@                                                                                                     @@@@@@             @@@@+                
                ,@@@@             #@@@@@                                       `;##@@@@@@@@@@@@@@@@#'.                                       @@@@@@             #@@@@                
                +@@@@             :@@@@@                                   :#@@@@@@@@@@@@@@@@@@@@@@@@@@@#;                                   @@@@#@             .@@@@                
                @@@@'             `#@@@@:                               +@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@.                               @@@@;@              @@@@                
                @@@@,              @@@@@#                            +@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@`                           `@@@@;#              @@@@                
                @@@@               @;@@@@                         .@@@@@@@@@@@@;`                    ,@@@@@@@@@@@@'                         ;@@@@::              @@@@.               
                @@@@               @ @@@@                       ;@@@@@@@@@@,                             `@@@@@@@@@@#                       @@@@#;.              @@@@'               
               `@@@@               # @@@@.                    ;@@@@@@@@@`                                    +@@@@@@@@#                     @@@@`:               @@@@@               
               ,@@@@               # @@@@#                  ,@@@@@@@@:                                         `@@@@@@@@#                  `@@@@ :               +@@@@               
               :@@@@               : :@@@@                `@@@@@@@#`                                              +@@@@@@@:                #@@@@ #               :@@@@               
               +@@@@               `  @@@@`              +@@@@@@#                                                   +@@@@@@@`              @@@@: +               ,@@@@               
               @@@@@                  @@@@@            `@@@@@@#`                                                      #@@@@@@;            ,@@@@  ,               .@@@@               
               @@@@@                  .@@@@           '@@@@@@:                                                          #@@@@@#           @@@@@                  `@@@@               
               @@@@@                   @@@@#         #@@@@@+   .`                                                    .   ;@@@@@@`        .@@@@`                  `@@@@               
               @@@@@                   :@@@@`      `@@@@@@,  ;@@@                                                   @@@#`  #@@@@@,       @@@@@                   `@@@@               
`              @@@@@                    @@@@@     `@@@@@#  ;@@##@+                                                  @@+@@#  '@@@@@;     +@@@@                    `@@@@              ;
``             @@@@@                    `@@@@#   .@@@@@+ `@+:   @@                                                 .@'  ,+#: ,@@@@@+   ,@@@@+                    `@@@@              +
.#             @@@@@                     +@@@@+ .@@@@@;         @@                                                 #@          @@@@@+ ,@@@@@                     .@@@@             `@
.@             '@@@@                      @@@@@@@@@@@,          ,@                                                 @@           @@@@@@@@@@@                      ,@@@@             #@
,@.            :@@@@                       @@@@@@@@@.            @                                                 @:            @@@@@@@@@.                      ;@@@@             @@
:@@            .@@@@                        @@@@@@@@+;'+@@@;     @                                                 @     ,#@@+';'@@@@@@@@.                       #@@@@            ,@@
:@@             @@@@                         #@@@@@@@@@@@@@@@    #                                                 #    #@@@@@@@@@@@@@@@,                        @@@@#            @@@
,@@'            @@@@                          '@@@@@@@@@@@@@@#   #                                                 ;   `@@@@@@@@@@@@@@#`                         @@@@'            @@@
,@@@            @@@@                           `+@@@@@@@'@@@@@   :                                                 `   .@@@@'#@@@@@@#,                           @@@@`           #@@@
.@@@,           @@@@:                                  .+@@@@@   `                                                     +@@@@@,   `                               @@@@            @@@@
.@@@@           @@@@#                               `:#@@++@@@                                                         :@@@;@@@;`                               `@@@@           '@@@#
 @@@@`          ;@@@@                                     @@@@                                                         `@@@                                     ;@@@@           @@@@+
 @@@@@           @@@@                                     @@@'                                                          @@@                                     @@@@#          ;@@@@:
 @@@@@.          @@@@`                                    @@@`                                                          @@@,                                    @@@@.          @@@@@,
 @@+@@@          @@@@+                                   `@@@                                                           @@@@                                    @@@@          '@@'@@`
 @@@#@@:         '@@@@                                   +@@@                                                           #@@@                                   +@@@@          @@@ @@ 
 @@@ @@@          @@@@                                   @@@@                                                           `@@@                  `                @@@@+         #@@,,@@ 
 @@@ ;@@+         @@@@'                :                 @@@,                                                            @@@+                ,                 @@@@         `@@@ '@@ 
 #@@  @@@`        '@@@@                 '               #@@@                                                             @@@@               ;                 #@@@@         @@@` @@@ 
 :@@  `@@@         @@@@`                 @,             @@@@                                                             +@@@`             #                  @@@@;        +@@#  @@@ 
 `@@.  +@@+        @@@@@                  ##           .@@@'                                                              @@@@           ;@                  :@@@@        `@@@   @@@ 
  @@@   @@@.       `@@@@`                  .@@         @@@@                                                               @@@@         +@+                   @@@@#        @@@`  .@@+ 
  @@@    @@@        @@@@@                    #@@+`    #@@@@                                                               :@@@@`    :@@@                    '@@@@        @@@'   @@@: 
  @@@#   :@@@       `@@@@:   `                 '@@@@@@@@@@.                                                                @@@@@@@@@@#                      @@@@#       +@@@   .@@@  
  @@@@    #@@#       #@@@@                        .'##@@@@                                                                 +@@@@##:                    `   @@@@@       ,@@@    @@@@  
  @@@;@    @@@+       @@@@@   `                      @@@@:                                                                  @@@@                      ;   '@@@@:       @@@    ,@@@@  
  ,@@;@     @@@,      ,@@@@@   '                    :@@@@                                                                   +@@@@                    '   .@@@@@       @@@,    @.@@@  
   @@@:@     @@@`      +@@@@@   '`                  @@@@,                                                                    @@@@;                  +   ;@@@@@       @@@'    ;@ @@#  
   @@@ @,    .@@@`      @@@@@@`  #;                @@@@@                                                                     ;@@@@`               `@   #@@@@@       @@@+     @`:@@.  
   @@@ ,@     :@@@       @@@@@@,  +@,             @@@@@                                                                       @@@@@`            `@@  `@@@@@@`      #@@@     #@ #@@   
   @@@  @#     '@@@       @@@@@@@` ,@@+.       `:@@@@@,                                                                        @@@@@+`       `;@@+  '@@@@@@`      #@@@     .@  @@@   
   :@@.  @,     +@@@       +@@@@@@'  ;@@@@@@@@@@@@@@@'                                                                          @@@@@@@@@@@@@@@+  ,@@@@@@@       #@@@      @+  @@@   
    @@#  +@      +@@@       :@@@@@@@#. :#@@@@@@@@@@@'                                                                           `@@@@@@@@@@@#' .;@@@@@@@+       #@@@      #@   @@@   
    @@@   @@      +@@@`      @@@@@@@@@@@@@@@@@@@@@@;                                                                              @@@@@@@@@@@@@@@@@@@@@@       #@@@      '@`  ;@@`   
    @@@   `@#      '@@@`     @@@@@@@@@@@@@@@@@@@@@                                                                                 +@@@@@@@@@@@@@@@@@@@@.     #@@@      .@'   @@@    
    '@@    ;@;      '@@@.   :@@@@ :#@@@@@@@@@@@#.      `                                                                      `      '@@@@@@@@@@@@' #@@@@    #@@@      `@@    @@@    
    `@@+    #@,      ;@@@,  @@@@#    `:''++''.       `.                                                                        :       `:''++''.     @@@@   @@@#       @@     @@@    
     @@@     @@`      :@@@: @@@@                    ;,                                                                          +                    @@@@;`@@@#       #@`    ,@@,    
     @@@     @@@`      ,@@@@@@@@                   ,                                                                             :                   '@@@@@@@'       #@@.    @@@     
     +@@ `   @#@@       `@@@@@@+                                                                                                                      @@@@@@;       #@#@`  ` @@@     
     `@@'    @:,@@        #@@@@                                                                                                                       @@@@@.       #@# @`  ` @@@     
      @@@ :  @` :@@       `@@@@           ,,                                     `                                                       .:           #@@@@       #@@  @, : :@@,     
      @@@  +;@   ;@@`     +@@@@             +#.                                                    `                                   +@`            .@@@@      #@@   @@:. @@@      
      '@@` `#,    ;@@.    @@@@@              :@.                                  .               ,                                   @#               @@@@     @@@     #:  @@@      
       @@#         :@@;   @@@@:              .@'                                   +             .                                    @#               @@@@   `@@@          @@#      
       @@@         @@@@#  @@@@;              @@                                    .;            @                                    @@`              @@@@  :@@@@;        +@@`      
       @@@        @@.'@@@`@@@@@             ,@:                                     @`          @                                      @@             .@@@@ #@@#,#@        @@@       
       :@@,       @@  `@@@#@@@@             @#                                      .@         +@                                      .@`            @@@@@@@@,  ;@        @@@       
        @@@       +@    #@@@@@@@           ;@                                        @`        @,                                       '@           ;@@@@@@@`   ;@       .@@+       
        @@@       `@     ,@@@@@@'          @                                         @         @`                                        #.          @@@@@@+     ##       @@@        
        +@@        @       '@@@@@.        ;`                                         @         @                                          @         @@@@@@`      @`       @@@        
        `@@+       +        ;@@@@@        ;                                          @         :                                           `       #@@@@@        @        @@@        
         @@@        ,        :@@@@+      ,                                           @                                                     .       @@@@@         +       '@@.        
         @@@        #         ;@@@@                                                  .                                                            @@@@@         `        @@@         
         .@@'       ,          @@@@.                                                                                                              @@@@          ;        @@@         
          @@@                  ,@@@@                                                                                                              @@@@          .     ` #@@,         
          #@@.       .          @@@@                                                                                                             ,@@@'                  @@@          
           @@@ #.               @@@@                                                                                                             :@@@:         `     @ @@@+          
           '@@@.@@              @@@@                                               ;                                                             '@@@:             '@`@@@@           
            '@@@,:@             @@@@   .@@,                                        #             `                                        `+@'   @@@@'            ## @@@@            
             ;@@@` #           .@@@@     :@@@@:`                                   @             .                                    ,@@@@+     @@@@@           #` @@@@             
              :@@@` '          +@@@ :      ,@@@@@#`                                @             '                                `;@@@@@'       ,@@@@          +  @@@@              
               ;@@@. ,         @@@@ +        `#@@@@@#`                             @             @                             `;@@@@@@:        ` @@@@         ;  @@@@               
                :@@@. `        @@@@             '@@@@@@+`                          @             @.                          :@@@@@@#           , `@@@`       .  @@@#                
                 :@@@,         @@@.              @@+@@@@@@;`                       @             @'                       ,@@@@@@#@@               @@@+      `  @@@#                 
                  ,@@@:       '@@@               :@ @@+@@@@@@,                     @             @@                    .#@@@@@#@@ @@               @@@@     ` `@@@#                  
                   .@@@;      @@@@                @ .@+ .#@@@@@#.                 `@             @@                 `'@@@@@#; `@@ @'               ,@@@      `@@@#                   
                    .@@@+     @@@:                @; @@`   :#@@@@@:               ,@`            @@               .@@@@@@'    @@` @                 @@@:    .@@@+                    
                     `@@@#   ,@@@                  @ ,@@      '@@@@@#.            :@`            @@             ;@@@@@+.     +@# :;                 @@@@   :@@@'                     
                       @@@@  #@@@                  ;  @@#       ,#@@@@@,          '@.            @@          `#@@@@@;       :@@  #                  #@@@  '@@@;                      
                        @@@@`@@@#                   ;  @@#         '@@@@@:        #@:            @@        .#@@@@#.        :@@. .                   `@@@`#@@@.                       
                         #@@@@@@.                    `  @@#          :#@@@@;      @@@            @@      ,@@@@@'          +@@:                       @@@@@@@`                        
                          ;@@@@@                         @@@:          .@@@@@'    @@@            @@    :@@@@@#          .#@@,                        @@@@@@                          
                           ,@@@@                          +@@@;`     ,+@@@@@@@@+  @@@           `@@  :@@@@@@@@#:`     :#@@@`                         @@@@+                           
                            @@@@                           .@@@@@@@@@@@@@;#@@@@@@'@@@           .@@;@@@@@@@;@@@@@@@@@@@@@:                           @@@@                            
                            @@@@                             .'@@@@@@#;`:@@;  @@@@@@@           ,@@@@@@. .@@+ :#@@@@@@#,                             @@@@                            
                            @@@@                             `        ,+:`   ,` ;@@@@           :@@@#` :.   ,';                                      @@@@                            
                            @@@@                              ;@@@;:.                                           `::@@@'.                             @@@@                            
                            #@@@,                                                                                                                    @@@@                            
                            .@@@@                                                                                                                   ;@@@@                            
                             @@@@:                                                                                                                  @@@@,                            
                             #@@@@                                                                  .                                              @@@@@                             
                              @@@@@                                             #'                  +                                             +@@@@,                             
                              .@@@@@                                           #`#                 + @                                           '@@@@@                              
                               +@@@@@                                         ;  #                 @  ,.                                        ;@@@@@                               
                                #@@@@@                       `,:+++,``           @`                @            `,++++,.                       ;@@@@@                                
                                 #@@@@#               `;#@@@@+.                  @;                @                  `;@@@@##.               :@@@@@                                 
                                  #@@@@+     `.,:'#@@@@@@,`                      @@               :@                       .+@@@@@#';:.`     `@@@@@                                  
                                   #@@@@:      .@:,@@@#                          @@               @@                          :@@@'`#+       @@@@@                                   
                                    @@@@@        @:  +@@@                        @@:              @@                        ;@@@   @:       @@@@@`                                   
                                     @@@@@        @#  `@@@.                      @@@             .#@                       @@@+  .@.       ;@@@@:                                    
                                     .@@@@.        @#  ;@@@+                     @@'             @ @`                    `@@@@  .@,        @@@@@                                     
                                      @@@@@         @;  +@@@#                    @; `            , @'                   `@@@@   @;        #@@@@                                      
                                       @@@@+        `@   @@@@+                  `@. ;           `  @@                  `@@@@   @+        `@@@@'                                      
                                       @@@@@.        ;#   @@@@,                 @@              `  @@                  @@@@:  `@         @@@@@                                       
                                        @@@@@         @   :@#@@`                @@   `             @@                 @@#@@   @         #@@@@#                                       
                                        @@@@@'         +   @@+@@                @@                 ,@+               #@@@@   `,         @@@@@                                        
                                        ;@@@@@         ,    @@@@#              #@,                  @@              ,@@:@'   #         @@@@@@                                        
                                         @@@@@+         :   +@.@@'             @@                   @@,            `@@:@@             `@@@@@+                                        
                                         @@@@ @              @@`@@.           +@'                    @@            @@++@,   :         @`@@@@                                         
                                         '@@@;..             '@.;@@`          @@                     @@`          @@@ @@              + @@@@                                         
                                          @@@@ +              @@ +@@          @@@                   #@@`         #@@ '@.             . `@@@@                                         
                                          @@@@                +@. #@@         .@@@                 +@@#         #@@  @@              , @@@@`                                         
                                          @@@@                 @@  #@@`        '@@#               :@@#         #@@` :@:                @@@@                                          
                                          +@@@                 #@`  #@@,        #@@'             `@@@        `@@@`  @@                 @@@@                                          
                                          `@@@.                 @#   ;@@#        @@@`            @@@`       :@@#   .@#                 @@@@                                          
                                           @@@:                 @@    ,@@@:       @@@           #@@;      .@@@;    @@                  @@@,                                          
                                           @@@@                 ;@;     +@@@;     ;@@#         .@@@     ,#@@@`     @@                  @@@                                           
                                           @@@@                  @@      +@@@@#:   @@@`        @@@   `'@@@@+      '@:                 .@@@                                           
                                           '@@@                  @@;      .,'@@@@@'+@@@       ;@@@;#@@@@#...      @@                  +@@@                                           
                                           `@@@#`                :@@`     `   ,+@@@@@@@.      @@@@@@@#:   :      @@@                 '@@@@                                           
                                            @@@@@#                @@@            `'#@@@@     ;@@@@;:            +@@;               '@@@@@`                                           
                                            `@@@@@@'              @@@@            `+ ;@@`    @@@ .:            ;@@@              ,@@@@@@:                                            
                                              +@@@@@@`            '@@@#    #`         @@@   .@@.         #    ,@'@@             #@@@@@@`                                             
                                               .@@@@@@'            @@ @+   @@         ;@@   @@@         #@   .@,@@+           .@@@@@@:                                               
                                                 ;@@@@@#           @@` @'  @@@         @@.  @@`        +@@  `@, @@           '@@@@@@                                                 
                                                  `@@@@@@          #@@  @' @.@@    @,  '@@ ;@@   @    ;@,@ `@. .@@          #@@@@@,                                                  
                                                    +@@@@@          @@   #'@:`@+   @@   @@ @@,  @#;  `@# @ @`  @@#         @@@@@@`                                                   
                                                     ,@@@@@`        @@:   ;@@ ;@.  @`@  #@@@@  .+,@  @#  @#    @@         @@@@@@                                                     
                                                      `@@@@@        #@@    .@  +@ `@ @`  @@@;  @ `@ @@  ++    ;@@        @@@@@+                                                      
                                                       `@@@@@        @@         #@ '  @  @@@  ';  @:@         @@'       +@@@@'                                                       
                                                        `@@@@@       @@@         ##;  +, @'@  @   #@         `@@       :@@@@+                                                        
                                                         .@@@@;      ,@@          #:   @ @ @ ',   @          @@@       @@@@@                                                         
                                                          +@@@@       @@#          .   ;`@ ;`@              .@@       @@@@@                                                          
                                                           @@@@@      :@@`              #'  #               @@@      `@@@@                                                           
                                                            @@@@   .   @@@                  '              #@@   ;   @@@@#                                                           
                                                            @@@@#   `   @@@  `                            '@@'   #  `@@@@                                                            
                                                             @@@@   @   :@@@+;                         `''@@@   ;`  @@@@+                                                            
                                                             @@@@.  @`   '@@@.                         +@@@@    @   @@@@                                                             
                                                             .@@@@  @@    ;@@@@`    `            ,    +@@@#    .@  `@@@@                                                             
                                                              @@@@  `@     `@@@@@:;'#   `       ,.':'@@@@;     @@  '@@@:                                                             
                                                              @@@@   @@      ;@@@@@+,'`.''``'; ,:'@@@@@+      :@   @@@@                                                              
                                                              @@@@   ,@#       .+@@@@@@@@@@@@@@@@@@@#;       ,@#   @@@@                                                              
                                                              @@@@#   ;@@:`        ,'++++:`.'++++,`        ,@@#   ;@@@@                                                              
                                                              '@@@@@`   ;#@@@':,,..``            `...,:;@@@@+`   #@@@@@                                                              
                                                               '@@@@@`          `,'''++++;,:;+++''':.           #@@@@@                                                               
                                                                ,@@@@@`                                        #@@@@#                                                                
                                                                 `@@@@@`                                      #@@@@'                                                                 
                                                                  `@@@@@                                     #@@@@'                                                                  
                                                                   `@@@@@                                   #@@@@'                                                                   
                                                                    `@@@@@                .+##             ;@@@@+                                                                    
                                                                     ,@@@@#             ,;`    `          .@@@@#                                                                     
                                                                      ;@@@@;                              @@@@@                                                                      
                                                                       #@@@@`                            @@@@@                                                                       
                                                                        @@@@@                           #@@@@`                                                                       
                                                                         @@@@#                         .@@@@;                                                                        
                                                                         ,@@@@`                        @@@@@                                                                         
                                                                          #@@@@                       +@@@@                                                                          
                                                                           @@@@;                      @@@@:                                                                          
                                                                           ;@@@@                     #@@@@                                                                           
                                                                            @@@@,                    @@@@.                                                                           
                                                                            '@@@@,                  @@@@@                                                                            
                                                                             @@@@@@#`            '#@@@@@;                                                                            
                                                                             ,@@@@@@@@@@#####@@@@@@@@@@@                                                                             
                                                                              `@@@@@@@@@@@@@@@@@@@@@@@;                                                                              
                                                                                `@@@@@@@@@@@@@@@@@@@:                                                                                
                                                                                   `;@@@@@@@@@@@#.                                                                                   
</pre>
<?php 
    try{
        // match token somewhat prevent's api abuse not really
        if (isset($_POST['_token'])){
            if(isset($_SESSION['token'])){
                if (empty($_POST['_token'])){
                    $_SESSION['error'] = '<p style="color: red; padding: 0px 0px 10px 0px; text-align: center; margin: 0;">Token empty!</p>';
                    die(header("location: ../"));
                }
                if (!$_POST['_token'] == $_SESSION['token']){
                    $_SESSION['error'] = '<p style="color: red; padding: 0px 0px 10px 0px; text-align: center; margin: 0;">Token error!</p>';
                    die(header("location: ../"));
                }
            } else{
                die();
            }
    
        } else {
            $_SESSION['error'] = '<p style="color: red; padding: 0px 0px 10px 0px; text-align: center; margin: 0;">Token error!</p>';
            die();
        }
    } catch (Exception $e){
        $_SESSION['error'] = '<p style="color: red; padding: 0px 0px 10px 0px; text-align: center; margin: 0;">Token error!</p>';
        die();
    }
    


    if(stripos($_POST['search-query'], '.') !== false) { $_SESSION['error'] = '<p style="color: red; padding: 0px 0px 10px 0px; text-align: center; margin: 0;">OOp Hi Haxor!</p>'; die("<script>window.location = '../'</script>"); }
    if(stripos($_POST['search-query'], '/') !== false ) { $_SESSION['error'] = '<p style="color: red; padding: 0px 0px 10px 0px; text-align: center; margin: 0;">OOp Hi Haxor!</p>'; die("<script>window.location = '../'</script>"); }
    if(stripos($_POST['search-query'], '%2f') !== false) { $_SESSION['error'] = '<p style="color: red; padding: 0px 0px 10px 0px; text-align: center; margin: 0;">Haxor try harder!</p>'; die("<script>window.location = '../'</script>"); }
    if(stripos($_POST['search-query'], "'") !== false) { $_SESSION['error'] = '<p style="color: red; padding: 0px 0px 10px 0px; text-align: center; margin: 0;">Haxor try harder!</p>'; die("<script>window.location = '../'</script>"); }
    
    $search = filter_input(INPUT_POST, 'search-query', FILTER_SANITIZE_SPECIAL_CHARS);

    $stmt = $dbh->prepare("SELECT * FROM past WHERE title LIKE ? ");
    $stmt->execute(array('%'.strip_tags($search).'%'));
    $fff = $stmt->fetchAll(PDO::FETCH_ASSOC);
    $countt = $stmt->rowCount();


    
?>
<h5 class="announcement a-1" style="color:#00ACEE;"><u><a style="color:inherit;" href="https://github.com/DarkRabbit-0/Doxbin">Doxbin 2.0</a></u></h5>
                <noscript><p style="color: red; padding: 0px 0px 10px 0px; text-align: center; margin: 0;">Searching requires JavaScript to function correctly.<br>Alternatively, you can type <u>/search/{query}</u> in the address bar.</p></noscript>
				<div id="error-msg" style="color: red; padding: 0px 0px 10px 0px; text-align: center; margin: 0;"></div>
				<form id="search-form" method="POST" action="<?php echo "http://$_SERVER[HTTP_HOST]/Doxbin-2.0/search/index.php";?>">
					<input type="hidden" name="_token" value="<?php echo $_SESSION['token']; ?>">
					<input name="search-query" type="text" placeholder="Search for..." value="<?php echo htmlspecialchars(strip_tags($search));?>">
					<input type="submit" value="Search">
				</form>
				<br>
								<p>Showing <?php echo intval($countt);?> result(s) for '<b><?php echo htmlspecialchars(strip_tags($search));?></b>'</p>
				            </div>
        </div>
        <div class="col-md-7" style="float:none;margin:auto;padding:0;">
							<table class="table table-striped table-hover">
					<thead>
						<tr>
							<th>Title</th>
							<th class="text-center">Comments</th>
							<th class="text-center">Created by</th>
                            <th class="text-center">Views</th>
							<th class="text-center">Added</th>
													</tr>
					</thead>


                        <?php
                        
                        foreach($fff as $e){
                            if (str_contains($e['username'], 'Anonymous')) {
                                $_SESSION['us'] = "Anonymous";
                            }
                            echo '
                            <tr class="doxentry  " id="83603">
							<td><a href="../upload/view.php?id='.strip_tags($e['id']).'" target="_blank">'.htmlspecialchars($e['title']).'</a></td>
							
							<td class="text-center">'.htmlspecialchars($e['com']).'</td>
                            
							<td style="padding-bottom: 0; max-width: 140px;" class="text-center"> <a class="dox-username" title="'.htmlentities($e['username']).'" style="color: #2a9fd6;" href="/user/'.htmlentities($e['username']).'">'.htmlentities($_SESSION['us']).'</a> </td>
                            <td class="text-center">'.intval($e['view']).'</td>
							<td class="text-center">May 1st, 2021</td>
													</tr>
                            
                            ';
                }
                ?>
					<tbody>
					</tbody>
				</table>
			        </div>
    </div>
   
</body>
</html>
